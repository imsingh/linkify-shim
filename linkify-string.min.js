!function(e){"use strict";function r(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t(e){return e.replace(/"/g,"&quot;")}function n(e){if(!e)return"";var r=[];for(var n in e){var i=(e[n]+"").replace(/"/g,"&quot;");r.push(""+n+'="'+t(i)+'"')}return r.join(" ")}function i(e){var i=void 0===arguments[1]?{}:arguments[1];i=a.normalize(i);for(var l=o(e),s=[],u=0;u<l.length;u++){var p=l[u];if(p.isLink){var f=a.resolve(i.tagName,p.type),g=a.resolve(i.linkClass,p.type),v=a.resolve(i.target,p.type),c=a.resolve(i.format,p.toString(),p.type),y=p.toHref(i.defaultProtocol),k=a.resolve(i.formatHref,y,p.type),m=a.resolve(i.attributes,p.type),h="<"+f+' href="'+t(k)+'" class="'+g+'"';v&&(h+=' target="'+v+'"'),m&&(h+=" "+n(m)),h+=">"+r(c)+"</"+f+">",s.push(h)}else s.push("nl"===p.type&&i.nl2br?i.newLine?i.newLine:"<br>\n":r(p.toString()))}return s.join("")}var o=e.tokenize,a=e.options;String.prototype.linkify||(String.prototype.linkify=function(e){return i(this,e)}),window.linkifyStr=i}(window.linkify);